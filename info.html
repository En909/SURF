<!DOCTYPE html>
<html lang="ru">
<head>
    <link href="info.css" rel="stylesheet">
    <link rel="icon" href="img/fav.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surf</title>
    <style>
        /* –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –ª—É–ø—ã */
        .magnifier {
            position: absolute;
            border: 2px solid #000;
            border-radius: 50%;
            cursor: none;
            width: 100px; /* –†–∞–∑–º–µ—Ä –ª—É–ø—ã */
            height: 100px; /* –†–∞–∑–º–µ—Ä –ª—É–ø—ã */
            overflow: hidden;
            display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –ª—É–ø—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            pointer-events: none;
        }

        .magnifier img {
            position: absolute;
            width: 1000%; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
            height: auto;
            top: 0; /* –£–±–∏—Ä–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ */
            left: 0; /* –£–±–∏—Ä–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ */
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="monitor">
        <div class="screen">
            <div class="icon" onclick="openWindow('win1')"><img src="img/host.png" width="50" height="50" /></div>
            <div class="icon" onclick="openWindow('win2')">üìú</div>
        </div>
        <div id="win1" class="window" onmousedown="startDrag(event, 'win1')">
            <div class="window-header">
                –ü–∞–ø–∫–∞
                <div class="close" onclick="closeWindow('win1')">X</div>
            </div>
            <div class="window-content">
                <img src="img/test.jpg" class="inn" id="image" style="cursor: pointer;" />
            </div>
        </div>
        <div id="win2" class="window" onmousedown="startDrag(event, 'win2')">
            <div class="window-header">
                –î–æ–∫—É–º–µ–Ω—Ç
                <div class="close" onclick="closeWindow('win2')">X</div>
            </div>
            <div class="window-content">
                <p>–≠—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç</p>
            </div>
        </div>

        <!-- –õ—É–ø–∞ -->
        <div class="magnifier" id="magnifier">
            <img src="img/test.jpg" alt="–£–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
        </div>
    </div>

    <script>
        function openWindow(id) {
            document.getElementById(id).style.display = 'block';
        }

        function closeWindow(id) {
            document.getElementById(id).style.display = 'none';
        }

        function startDrag(event, id) {
            let element = document.getElementById(id);
            element.style.zIndex = 1;

            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–∫–Ω–∞
            let rect = element.getBoundingClientRect();

            // –í—ã—á–∏—Å–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ –ª–µ–≤–æ–≥–æ —É–≥–ª–∞ –æ–∫–Ω–∞
            let offsetX = event.clientX - rect.left;
            let offsetY = event.clientY - rect.top;

            function moveAt(pageX, pageY) {
                element.style.left = pageX - offsetX + 'px';
                element.style.top = pageY - offsetY + 'px';
            }

            function onMouseMove(event) {
                moveAt(event.pageX, event.pageY);
            }

            document.addEventListener('mousemove', onMouseMove);

            document.onmouseup = function () {
                document.removeEventListener('mousemove', onMouseMove);
                document.onmouseup = null;
                element.style.zIndex = 0;
            };

            event.preventDefault();
        }
        // –õ–æ–≥–∏–∫–∞ –¥–ª—è –ª—É–ø—ã
        const image = document.getElementById('image');
        const magnifier = document.getElementById('magnifier');

        image.addEventListener('mousemove', function (e) {
            magnifier.style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª—É–ø—É
            const rect = image.getBoundingClientRect();

            // –ü–æ–∑–∏—Ü–∏—è –∫—É—Ä—Å–æ—Ä–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –ª—É–ø—É
            magnifier.style.left = (e.pageX - 50) + 'px'; // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ª—É–ø—É
            magnifier.style.top = (e.pageY - 50) + 'px'; // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ª—É–ø—É

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            magnifier.querySelector('img').style.transform = 'translate(' + (-x *2) + 'px, ' + (-y * 2) + 'px)'; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤ 2 —Ä–∞–∑–∞
        });

        // –°–∫—Ä—ã—Ç–∏–µ –ª—É–ø—ã –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∫—É—Ä—Å–æ—Ä–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        image.addEventListener('mouseleave', function () {
            magnifier.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –ª—É–ø—É
        });

        // –°–∫—Ä—ã—Ç–∏–µ –ª—É–ø—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        document.addEventListener('click', function (e) {
            if (!image.contains(e.target) && !magnifier.contains(e.target)) {
                magnifier.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –ª—É–ø—É
            }
        });
    </script>

</body>
</html>
